{"ast":null,"code":"var _jsxFileName = \"/home/sergi/aspaara/react-coding-challenge/client/src/components/ui/Stats.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useQuery } from 'react-query';\nimport jobConfig from '../config/dashboards/jobConfig'; //most repeated string in an array\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Stats() {\n  _s();\n\n  const getMostFrequent = arr => {\n    const hashmap = arr.reduce((acc, val) => {\n      acc[val] = (acc[val] || 0) + 1;\n      return acc;\n    }, {});\n    return Object.keys(hashmap).reduce((a, b) => hashmap[a] > hashmap[b] ? a : b);\n  };\n\n  const getMostRequiredSkillsByRole = role => {\n    let skillsArray = [];\n    const filteredData = data.filter(e => {\n      return e.bookingGrade === role; //array with only manager and skills\n    }).map(job => {\n      var _job$requiredSkills;\n\n      job === null || job === void 0 ? void 0 : (_job$requiredSkills = job.requiredSkills) === null || _job$requiredSkills === void 0 ? void 0 : _job$requiredSkills.forEach(element => {\n        //@ts-ignore\n        return skillsArray.push(element.name);\n      });\n    });\n    return g;\n  };\n\n  const getOfficeWithMostJobsByClient = client => {\n    const filteredData = data.filter(e => {\n      return e.clientName === client;\n    });\n    return;\n  };\n\n  const getPercentageOfJobsByIndustry = industry => {\n    const filteredData = data.filter(e => {\n      return e.industry === industry;\n    });\n    return filteredData.length / data.length * 100;\n  };\n\n  const {\n    data,\n    status,\n    isSuccess\n  } = useQuery(\"fetchAllData\", jobConfig.fetchAll);\n  if (status === 'loading') return /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: \"Loading stats...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 38\n  }, this);\n  if (status === 'error') return /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: \"Error loading stats\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 36\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      children: \"Main insights:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Data size: \", isSuccess && (data === null || data === void 0 ? void 0 : data.length), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 49\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Most in-demand skills for senior managers: \", getMostRequiredSkillsByRole('Senior Manager')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Office city with the most jobs from the top client:  \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 49\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Percentage of jobs in Low Tech: \", isSuccess && getPercentageOfJobsByIndustry(\"Low technology\") + '%']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 49\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Stats, \"ATPq03CP5uGupgP6Jcrj0kBQMhY=\", false, function () {\n  return [useQuery];\n});\n\n_c = Stats;\n\nvar _c;\n\n$RefreshReg$(_c, \"Stats\");","map":{"version":3,"names":["React","useQuery","jobConfig","Stats","getMostFrequent","arr","hashmap","reduce","acc","val","Object","keys","a","b","getMostRequiredSkillsByRole","role","skillsArray","filteredData","data","filter","e","bookingGrade","map","job","requiredSkills","forEach","element","push","name","g","getOfficeWithMostJobsByClient","client","clientName","getPercentageOfJobsByIndustry","industry","length","status","isSuccess","fetchAll"],"sources":["/home/sergi/aspaara/react-coding-challenge/client/src/components/ui/Stats.tsx"],"sourcesContent":["import React from 'react'\nimport { useQuery, UseQueryOptions } from 'react-query'\nimport { job } from '../config/dashboards/jobConfig'\nimport jobConfig from '../config/dashboards/jobConfig'\n\n//most repeated string in an array\nexport default function Stats() {\n    const getMostFrequent = (arr) => {\n        const hashmap = arr.reduce((acc, val) => {\n            acc[val] = (acc[val] || 0) + 1\n            return acc\n        }, {})\n        return Object.keys(hashmap).reduce((a, b) => hashmap[a] > hashmap[b] ? a : b)\n    }\n\n    const getMostRequiredSkillsByRole = (role: string) => {\n        let skillsArray: string[] = []\n        const filteredData = (data as job[]).filter((e) => {\n            return e.bookingGrade === role\n            //array with only manager and skills\n        }).map((job) => {\n            job?.requiredSkills?.forEach((element) => {\n                //@ts-ignore\n                return skillsArray.push((element.name))\n            });\n\n        }\n\n        )\n        return g\n    }\n    const getOfficeWithMostJobsByClient = (client: string) => {\n        const filteredData = (data as job[]).filter((e) => {\n            return e.clientName === client\n        })\n        return\n    }\n\n    const getPercentageOfJobsByIndustry = (industry: string) => {\n        const filteredData = (data as job[]).filter((e) => {\n            return e.industry === industry\n        })\n        return filteredData.length / (data as job[]).length * 100\n    }\n\n\n\n\n\n    const { data, status, isSuccess } = useQuery(\"fetchAllData\", jobConfig.fetchAll)\n    if (status === 'loading') return <h1>Loading stats...</h1>\n    if (status === 'error') return <h1>Error loading stats</h1>\n    return (\n\n        <div>\n            <h5>Main insights:</h5>\n            <ul className=\"list-group\">\n                {/*@ts-ignore */}\n                <li className=\"list-group-item\"><span>Data size: {isSuccess && data?.length} </span></li>\n\n                <li className=\"list-group-item\">\n                    {/*@ts-ignore */}\n                    <span>Most in-demand skills for senior managers: {getMostRequiredSkillsByRole('Senior Manager')}</span></li>\n                <li className=\"list-group-item\"><span>Office city with the most jobs from the top client:  </span></li>\n                <li className=\"list-group-item\"><span>Percentage of jobs in Low Tech: {isSuccess && getPercentageOfJobsByIndustry(\"Low technology\") + '%'}</span></li>\n            </ul>\n        </div>\n\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}